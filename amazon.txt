package Amazon;

import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.Select;
import org.testng.annotations.Test;

public class Mobiles {
	
	WebDriver driver;
	
  @Test
  public void test01() throws Exception {
	  
	  System.setProperty("webdriver.chrome.driver","C:\\chromedriver_win32\\chromedriver.exe");
		driver =new ChromeDriver();
		driver.manage().window().maximize();
		driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
		driver.get("https://amazon.in");
		
		
		
		findElement(By.xpath("//a[text()='Mobiles']")).click();
		
		Thread.sleep(4000);
		
		findElement(By.xpath("//img[@alt='A15s']")).click();
		
		findElement(By.id("add-to-cart-button")).click();
		
		WebElement ele= findElement(By.xpath("//span[text()=' Cart ']"));
		 /*JavascriptExecutor js = (JavascriptExecutor)driver;	
	     js.executeScript("arguments[0].click();", ele);
	     Thread.sleep(4000);*/
		
		Actions actions=new Actions(driver);
		actions.moveToElement(ele).click().perform();
		
		/*String cartamount1=driver.findElement(By.xpath("(//span[@class='a-size-medium a-color-base sc-price sc-white-space-nowrap'])[1]")).getText();
		System.out.println("CArt amount1 is :"+cartamount1);
		Float floatcartamount1=getFloat_From_String(cartamount1);
		System.out.println("Float cart amount 1 is :"+floatcartamount1);*/
		
		String cartamount2=driver.findElement(By.xpath("(//span[@class='a-size-medium a-color-base sc-price sc-white-space-nowrap'])[2]")).getText();
		System.out.println("Actual CartAmount2 is :"+cartamount2);
		Float floatcartamount2=getFloat_From_String(cartamount2);
		System.out.println("Float CartAmount2 is :"+floatcartamount2);
		
		Select dropdown=new Select(driver.findElement(By.xpath("//select[@name='quantity']")));
		dropdown.selectByVisibleText("4");
		
		String Quantity=driver.findElement(By.xpath("//span[@class='a-dropdown-prompt']")).getText();
		Float floatquantity=getFloat_From_String(Quantity);
		System.out.println("Float quantity is"+floatquantity);
		
		Thread.sleep(6000);
		
		String productamount=driver.findElement(By.xpath("//span[@class='a-size-medium a-color-base sc-price sc-white-space-nowrap sc-product-price a-text-bold']")).getText();
		Float floatproductamount=getFloat_From_String(productamount);
		System.out.print("Float produuct amaount :"+floatproductamount);
		
		
		Float ToatalAmount=(float)((floatproductamount)*(floatquantity));
		System.out.println("Toatal cart amount is"+ToatalAmount);
		
		
		
		
				
	  
  }
  
  public static  float getFloat_From_String(String str)
  {

  	String output = str.replace("?", "").replace(",", "");
  	float f=Float.parseFloat(output);
  	return f;
  	
  }
  
  public  WebElement findElement(By by) throws Exception 
  {

	  Thread.sleep(4000);
  	WebElement elem = driver.findElement(by);  
  	
  	if (driver instanceof JavascriptExecutor) 
  	{
  	 ((JavascriptExecutor)driver).executeScript("arguments[0].style.border='3px solid red'", elem);
   
  	}
  	return elem;
  }
}


